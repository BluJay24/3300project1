<html>
<head>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<!-- Load the d3 library. -->
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<style>
body { font-family: "Open Sans"; } div { margin: 30px; }
svg { 
	border: solid black 1px; 
	display: block;
	margin: auto;
}
/* The default styles for axis elements stink. What should they be? */
.axis path {}
.axis line {}
p {
	text-align: center; 
	font-family: "Courier New", Courier, monospace;
	font-size: 16px
}
</style>
</head>
<body>

<svg height="125" width="1200" style="border:none"> 
		<text
		x="600" y="50"
		dominant-baseline = "central"
        text-anchor="middle"
        fill= "black"
        font-family = "sans-serif"
        font-size   = "32">World's Web Index Ranking</text>
        <text
		x="600" y="100"
		dominant-baseline = "central"
        text-anchor="middle"
        fill= "black"
        font-family = "Courier New"
        font-size   = "20">*Countries with no/insufficient data are shaded gray</text>
     </svg>

<p>Index score determined by evaluating Universal Access, Relevant Content, Freedom & Openness, and Impact & Empowerment.</p>

<!-- The SVG element will go in here -->
<!--<div style="width: 100%; margin-left: -20px">-->

	<div id="world_map"></div> <!--style="float: left"-->
	<p>Index Scores</p>
	<div style="margin-left: 200px"> <!--style="margin-left: 50px"--> 
			<svg width="100" height="50" style="border: none; float: left">
				<rect width="100" height="25" style="fill:#f7fbff;"/>
				<text x="0" y="40" fill="black" style="font-family: Courier New, Courier, monospace">0 - 9</text>
			</svg>
			<svg width="100" height="50" style="border: none; float: left">
				<rect width="100" height="25" style="fill:#deebf7;"/>
				<text x="0" y="40" fill="black" style="font-family: Courier New, Courier, monospace">10 - 19</text>
			</svg>
			<svg width="100" height="50" style="border: none; float: left">
				<rect width="100" height="25" style="fill:#c6dbef;"/>
				<text x="0" y="40" fill="black" style="font-family: Courier New, Courier, monospace">20 - 29</text>
			</svg>
			<svg width="100" height="50" style="border: none; float: left">
				<rect width="100" height="25" style="fill:#9ecae1;"/>
				<text x="0" y="40" fill="black" style="font-family: Courier New, Courier, monospace">30 - 39</text>
			</svg>
			<svg width="100" height="50" style="border: none; float: left">
				<rect width="100" height="25" style="fill:#6baed6;"/>
				<text x="0" y="40" fill="black" style="font-family: Courier New, Courier, monospace">40 - 49</text>
			</svg>
			<svg width="100" height="50" style="border: none; float: left">
				<rect width="100" height="25" style="fill:#4292c6;"/>
				<text x="0" y="40" fill="black" style="font-family: Courier New, Courier, monospace">50 - 59</text>
			</svg>
			<svg width="100" height="50" style="border: none; float: left">
				<rect width="100" height="25" style="fill:#2171b5;"/>
				<text x="0" y="40" fill="black" style="font-family: Courier New, Courier, monospace">60 - 69</text>
			</svg>
			<svg width="100" height="50" style="border: none; float: left">
				<rect width="100" height="25" style="fill:#08519c;"/>
				<text x="0" y="40" fill="black" style="font-family: Courier New, Courier, monospace">70 - 79</text>
			</svg>
			<svg width="100" height="50" style="border: none; float: left">
				<rect width="100" height="25" style="fill:#08306b;"/>
				<text x="0" y="40" fill="black" style="font-family: Courier New, Courier, monospace">80 - 89</text>
			</svg>
			<svg width="100" height="50" style="border: none; float: left">
				<rect width="100" height="25" style="fill:rgb(0, 25, 70);"/>
				<text x="0" y="40" fill="black" style="font-family: Courier New, Courier, monospace">90 - 100</text>
			</svg>
		</div>
<br><br>

<div>
	<svg height="100" width="1200" style="border:none"> 
		<text
		x="600" y="50"
		dominant-baseline = "central"
        text-anchor="middle"
        fill= "black"
        font-family = "sans-serif"
        font-size   = "32">Web Index Ranking Versus Education</text>
     </svg>
 </div>

    <div id="canvas"></div>

<script>
var width = 1200,
    height = 620;

var projection = d3.geo.equirectangular().scale(200).translate([width / 2, height / 2]);

var path = d3.geo.path().projection(projection);
	
var svg = d3.select("#world_map").append("svg")
    .attr("width", width)
    .attr("height", height);

var g = svg.append("g");
var worldData;

/*var color_array = [
	{
		"id": 32, 
		"score": 55.2
	},

	{
		"id": 36,
		"score": 86.4, 
	}
];*/

d3.json("world-50m.json", function(error, world) {
	worldData = world;

	g.selectAll("path") 
	.data(topojson.feature(world, world.objects.countries).features)
	.enter().append("path")
		.attr("d", path)
		.style("fill", function(country) { 
			if (country.id == 840) {	//is it ok to manually input every country? 
				return "rgb(0, 25, 70)"; //US 
			}
			else if (country.id == 32 ) { 
				return "#6baed6"; //Argentina
			}
			else if (country.id == 36 ) {
				return "#08519c"; //Australia 
			}
			else if (country.id == 40 ) { 
				return "#08519c"; //Austria
			}
			else if (country.id == 48) { 
				return "#9ecae1"; //Bahrain
			}
			else if (country.id == 50) {
				return "#c6dbef"; //Bangladesh
			}
			else if (country.id == 56) {
				return "#08519c"; //Belgium
			}
			else if (country.id == 204) {
				return "#deebf7"; //Benin
			}
			else if (country.id == 72) {
				return "#deebf7"; //Botswana
			}
			else if (country.id == 76) {
				return "#4292c6"; //Brazil
			}
			else if (country.id == 854) {
				return "#deebf7"; //Burkina Faso
			}
			else if (country.id == 120) {
				return "#deebf7"; //Cameroon 
			}
			else if (country.id == 124) {
				return "#08306b"; //Canada
			}
			else if (country.id == 152) {
				return "#2171b5"; //Chile
			}
			else if (country.id == 156) {
				return "#9ecae1"; //China
			}
			else if (country.id == 170) {
				return "#2171b5"; //Colombia
			}
			else if (country.id == 188) {
				return "#4292c6"; //Costa Rica
			}
			else if (country.id == 203) {
				return "#08519c"; //Czech Republic 
			}
			else if (country.id == 208) {
				return "rgb(0, 25, 70)"; //Denmark
			}
			else if (country.id == 218) {
				return "#6baed6"; //Ecuador
			}
			else if (country.id == 818) {
				return "#c6dbef"; //Egypt
			}
			else if (country.id == 233) {
				return "#08519"; //Estonia 
			}
			else if (country.id == 231) {
				return "#f7fbff"; //Ethiopia
			}
			else if (country.id == 246) {
				return "rgb(0, 25, 70)"; //Finland
			}
			else if (country.id == 250) {
				return "rgb(0, 25, 70)"; //France
			}
			else if (country.id == 276) {
				return "#08306b"; //Germany
			}
			else if (country.id == 288) {
				return "#9ecae1"; //Ghana
			}
			else if (country.id == 300) {
				return "#08519c"; //Greece
			}
			else if (country.id == 348) {
				return "#6baed6"; //Hungary
			}
			else if (country.id == 352) {
				return "rgb(0, 25, 70)"; //Iceland
			}
			else if (country.id == 356) {
				return "#9ecae1"; //India
			}
			else if (country.id == 360) {
				return "#9ecae1"; //Indonesia
			}
			else if (country.id == 372) {
				return "#08419c"; //Ireland
			}
			else if (country.id == 376) {
				return "#08419c"; //Israel
			}
			else if (country.id == 380) {
				return "#08419c"; //Italy
			}
			else if (country.id == 388) {
				return "#6baed6"; //Jamaica
			}
			else if (country.id == 392) {
				return "#08306b"; //Japan
			}
			else if (country.id == 400) {
				return "#c6dbef"; //Jordan
			}
			else if (country.id == 398) {
				return "#9ecae1"; //Kazakhstan
			}
			else if (country.id == 404) {
				return "#9ecae1"; //Kenya
			}
			else if (country.id == 454) {
				return "#deebf7"; //Malawi
			}
			else if (country.id == 458) {
				return "#4292c6"; //Malaysia
			}
			else if (country.id == 466) {
				return "#f7fbff"; //Mali
			}
			else if (country.id == 480) {
				return "#6baed6"; //Mauritius
			}
			else if (country.id == 484) {
				return "#2171b5"; //Mexico
			}
			else if (country.id == 504) {
				return "#9ecae1"; //Morocco
			}
			else if (country.id == 516) {
				return "#9ecae1"; //Namibia
			}
			else if (country.id == 524) {
				return "#deebf7"; //Nepal
			}
			else if (country.id == 528) {
				return "#08306b"; //Netherlands
			}
			else if (country.id == 554) {
				return "rgb(0, 25, 70)"; //New Zealand
			}
			else if (country.id == 566) {
				return "#c6dbef"; //Nigeria
			}
			else if (country.id == 578) {
				return "rgb(0, 25, 70)"; //Norway
			}
			else if (country.id == 586) {
				return "#deebf7"; //Pakistan
			}
			else if (country.id == 604) {
				return "#6baed6"; //Peru
			}
			else if (country.id == 608) {
				return "#6baed6"; //Philippines
			}
			else if (country.id == 616) {
				return "#08519c"; //Poland
			}
			else if (country.id == 620) {
				return "#08519c"; //Portugal
			}
			else if (country.id == 634) {
				return "#9ecae1"; //Qatar
			}
			else if (country.id == 410) {
				return "#08306b"; //Korea
			}
			else if (country.id == 643) {
				return "#6baed6"; //Russia
			}
			else if (country.id == 646) {
				return "#deebf7"; //Rwanda
			}
			else if (country.id == 682) {
				return "#deebf7"; //Saudi Arabia
			}
			else if (country.id == 686) {
				return "#c6dbef"; //Senegal
			}
			else if (country.id == 702) {
				return "#2171b5"; //Singapore
			}
			else if (country.id == 710) {
				return "#4292c6"; //South Africa
			}
			else if (country.id == 724) {
				return "#deebf7"; //Spain
			}
			else if (country.id == 752) {
				return "rgb(0, 25, 70)"; //Sweden do we maybe want to put sweden in a differnet color becasue it has a score of 100? 
			}
			else if (country.id == 756) {
				return "#08519c"; //Switzerland
			}
			else if (country.id == 764) {
				return "#6baed6"; //Thailand
			}
			else if (country.id == 788) {
				return "#6baed6"; //Tunisia
			}
			else if (country.id == 792) {
				return "#9ecae1"; //Turkey
			}
			else if (country.id == 800) {
				return "#c6dbef"; //Uganda
			}
			else if (country.id == 784) {
				return "#6baed6"; //United Arab Emirates
			}
			else if (country.id == 826) {
				return "rgb(0, 25, 70)"; //United Kingdom of GB and Northern Ireland
			}
			else if (country.id == 834) {
				return "#9ecae1"; //United Republic of Tanzania
			}
			else if (country.id == 858) {
				return "#2171b5"; //Uruguay
			}
			else if (country.id == 862) {
				return "#9ecae1"; //Venezuela
			}
			else if (country.id == 704) {
				return "#deebf7"; //Vietnam
			}
			else if (country.id == 887) {
				return "#f7fbff"; //Yemen //should this one be a differet color because it's score is 0? 
			}
			else if (country.id == 894) {
				return "#c6dbef"; //Zambia
			}
			else if (country.id == 716) {
				return "#deebf7"; //Zimbabwe
			}
			else {
				return "rgb(192, 192, 192)";
			} 
		})
		.style("stroke", "#cccccc")
	
	/*for (var i = 0; i < color_array.length; i++) {
				if (0 <= color_array[i].score <= 9) {
					return "#f7fbff"; 
				}
				else if (10 <= color_array[i].score <= 19) {
					return "#deebf7"; 
				}
				else if (20 <= color_array[i].score <= 29) {
					return "#c6dbef"; 
				}	
				else if (30 <= color_array[i].score <= 39) {
					return "#9ecae1";
				}	
				else if (40 <= color_array[i].score <= 49) {
					return "#6baed6"; 
				}
				else if (50 <= color_array[i].score <= 59) {
					return "#4292c6"; 
				}
				else if (60 <= color_array[i].score <= 69) {
					return "#2171b5"; 
				}
				else if (70 <= color_array[i].score <= 79) {
					return "#08519c"; 
				}
				else if (80 <= color_array[i].score <= 89) {
					return "#08306b"; 
				}	
				else if (90 <= color_array[i].score <= 100) {
					return "rgb(0, 25, 70)";
				} 	
				else {
					return "rgb(192, 192, 192)";
				}*/	
			
});

 var education;
		d3.json("new_education.json", function(error, data){

			education = data;
        
        var svg = d3.select("#canvas").append("svg")
     	.attr("height",1700)
     	.attr("width",1200)
     	.style("border", "none");

        
		var universal = svg.selectAll("rect").data(education).enter().append("rect");
		universal.attr("x", function(d){return (250+210*((d.edurank-1)%5))})
		         .attr("y", function(d){return 100+150*(Math.floor((d.edurank-1)/5)) - (d.Universal)})
		         .attr("height", function(d){return (d.Universal)})
		         .attr("width", 15)
		         .style("fill", function(d){
		         	if (d.Universal<62.95) {return "#99d8c9";}
		         	else {return "#2ca25f";}
		         });

		
		
		var relevant = svg.selectAll("rectr").data(education).enter().append("rect");
		relevant.attr("x", function(d){return (265+210*((d.edurank-1)%5))})
		         .attr("y", function(d){return 100+150*(Math.floor((d.edurank-1)/5)) - (d.Relevant)})
		         .attr("height", function(d){return (d.Relevant)})
		         .attr("width", 15)
		         .style("fill", function(d){
		         	if (d.Relevant<64.62) {return "#9ecae1";}
		         	else {return "#3182bd";}
		         });

		

	    var freedom = svg.selectAll("rectf").data(education).enter().append("rect");
		freedom.attr("x", function(d){return (280+210*((d.edurank-1)%5))})
		         .attr("y", function(d){return 100+150*(Math.floor((d.edurank-1)/5)) - (d.Freedom)})
		         .attr("height", function(d){return (d.Freedom)})
		         .attr("width", 15)
		         .style("fill", function(d){
		         	if (d.Freedom<59.25) {return "#fa9fb5";}
		         	else {return "#dd1c77";}
		         });

		var impact = svg.selectAll("recti").data(education).enter().append("rect");
		impact.attr("x", function(d){return (295+210*((d.edurank-1)%5))})
		         .attr("y", function(d){return 100+150*(Math.floor((d.edurank-1)/5)) - (d.Impact)})
		         .attr("height", function(d){return (d.Impact)})
		         .attr("width", 15)
		         .style("fill", function(d){
		         	if (d.Impact<48.18) {return "#fdae6b";}
		         	else {return "#e6550d";}
		         });


		var country = svg.selectAll("text").data(education).enter().append("text");
		country.attr("x", function(d){return 280+210*((d.edurank-1)%5)})
		       .attr("y", function(d){return 125+150*(Math.floor((d.edurank-1)/5))})
		       .text(function(d){return d.Country})
		       .attr("font-family", "sans-serif")
               .attr("font-size", "20px")
               .attr("fill", "black")
		       .attr("dominant-baseline","central") 
		       .attr("text-anchor","middle"); 


		  /*Legend*/
        var legendUniversalRL = svg.append("rect");
        legendUniversalRL.attr("x", 25)
                        .attr("y", 55)
                        .attr("width", 50)
                        .attr("height", 25)
                        .style("fill","#2ca25f");
        var legendUniversalRR = svg.append("rect");
        legendUniversalRR.attr("x", 75)
                        .attr("y", 55)
                        .attr("width", 50)
                        .attr("height", 25)
                        .style("fill","#99d8c9");
        var UniversalT = svg.append("text");
        UniversalT.attr("x", 15)
        		  .attr("y", 40)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "15px")
                  .attr("fill", "black")
		          .attr("dominant-baseline","central") 
		          .attr("text-anchor","middle")
		          .text("UA");


		var legendRelevantRL = svg.append("rect");
        legendRelevantRL.attr("x", 25)
                        .attr("y", 125)
                        .attr("width", 50)
                        .attr("height", 25)
                        .style("fill","#3182bd");
        var legendRelevantRR = svg.append("rect");
        legendRelevantRR.attr("x", 75)
                        .attr("y", 125)
                        .attr("width", 50)
                        .attr("height", 25)
                        .style("fill","#9ecae1");
        var RelevantT = svg.append("text");
        RelevantT.attr("x", 15)
        		  .attr("y", 110)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "15px")
                  .attr("fill", "black")
		          .attr("dominant-baseline","central") 
		          .attr("text-anchor","middle")
		          .text("RC");


	    var legendFreedomRL = svg.append("rect");
        legendFreedomRL.attr("x", 25)
                        .attr("y", 195)
                        .attr("width", 50)
                        .attr("height", 25)
                        .style("fill","#dd1c77");
        var legendFreedomRR = svg.append("rect");
        legendFreedomRR.attr("x", 75)
                        .attr("y", 195)
                        .attr("width", 50)
                        .attr("height", 25)
                        .style("fill","#fa9fb5");
        var FreedomT = svg.append("text");
        FreedomT.attr("x", 15)
        		  .attr("y", 180)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "15px")
                  .attr("fill", "black")
		          .attr("dominant-baseline","central") 
		          .attr("text-anchor","middle")
		          .text("FO");

	    var legendImpactRL = svg.append("rect");
        legendImpactRL.attr("x", 25)
                        .attr("y", 265)
                        .attr("width", 50)
                        .attr("height", 25)
                        .style("fill","#e6550d");
        var legendImpactRR = svg.append("rect");
        legendImpactRR.attr("x", 75)
                        .attr("y", 265)
                        .attr("width", 50)
                        .attr("height", 25)
                        .style("fill","#fdae6b");
        var ImpactT = svg.append("text");
        ImpactT.attr("x", 15)
        		  .attr("y", 250)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "15px")
                  .attr("fill", "black")
		          .attr("dominant-baseline","central") 
		          .attr("text-anchor","middle")
		          .text("IE");




         var noteAvgA = svg.append("text");
         noteAvgA.attr("x", 50)
        		  .attr("y", 305)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "12px")
                  .attr("fill", "black")
		          .attr("dominant-baseline","central") 
		          .attr("text-anchor","middle")
		          .text("Above");


		var noteAvgAa = svg.append("text");
         noteAvgAa.attr("x", 45)
        		  .attr("y", 319)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "12px")
                  .attr("fill", "black")
		          .attr("dominant-baseline","central") 
		          .attr("text-anchor","middle")
		          .text("Average");



		 var noteAvgB = svg.append("text");
        noteAvgB.attr("x", 100)
        		  .attr("y", 305)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "12px")
                  .attr("fill", "black")
		          .attr("dominant-baseline","central") 
		          .attr("text-anchor","middle")
		          .text("Below");


		var noteAvgBb = svg.append("text");
        noteAvgBb.attr("x", 105)
        		  .attr("y", 319)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "12px")
                  .attr("fill", "black")
		          .attr("dominant-baseline","central") 
		          .attr("text-anchor","middle")
		          .text("Average");

		

  	    var UA = svg.append("text");
            UA.attr("x", 10)
        		  .attr("y", 365)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "12px")
                  .attr("fill", "black")
		          .text("UA: Universal Access");

		var RC = svg.append("text");
             RC.attr("x", 10)
        		  .attr("y", 380)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "12px")
                  .attr("fill", "black")
		          .text("RC: Relevant Content");
		var FO = svg.append("text");
             FO.attr("x", 10)
        		  .attr("y", 395)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "12px")
                  .attr("fill", "black")
                  .text("FO: Freedom and Openning");
		var IE = svg.append("text");
             IE.attr("x", 10)
        		  .attr("y", 410)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "12px")
                  .attr("fill", "black")
		          .text("IE: Impact and Empowerment");

		var NOTE = svg.append("text");
             NOTE.attr("x", 700)
        		  .attr("y", 1600)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "12px")
                  .attr("fill", "black")
                  .attr("dominant-baseline","central") 
		          .attr("text-anchor","middle")
		          .text("*NOTE: The order of countries in this graph is based on the percentage of population age 15+ with completed secondary schooling.");
        var NOTEa = svg.append("text");
             NOTEa.attr("x", 700)
        		  .attr("y", 1620)
        		  .attr("font-family", "sans-serif")
                  .attr("font-size", "12px")
                  .attr("fill", "black")
                  .attr("dominant-baseline","central") 
		          .attr("text-anchor","middle")
		          .text("Data from database: Education Statistics: Education Attainment & 2013 World Wide Web Foundation");
		 

		         			
		});
</script>

</body>
</html>
